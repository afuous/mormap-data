<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
	  <meta http-equiv="X-UA-Compatible" content="IE=edge">
	  <meta name="google-site-verification" content="iZPx5YPDKe6xaZTCKdgkb9u9r2DDKHVPkgFDkCgPqJg" />
	  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<title>MorTeam - The General-Purpose FRC Team Management Platform</title>
		<link rel="stylesheet" href="css/login.css" type="text/css"/>
		<link href='https://fonts.googleapis.com/css?family=Exo+2:400,300,200' rel='stylesheet' type='text/css'>
		<meta name="description" content="With an all-in-one website, communicate with teammmates using team-wide and subdivision-specific announcements, chats, group drives, calendar events, attendance, and more.">
	</head>

	<body>

		<div class="landingBox landingBox-top">
			<h1>MorMap</h1><h3> Beta</h3>
		</div>

		<!-- AVOID USING <br> FOR SPACING PURPOSES. USE CSS margin INSTEAD -->
		<div class="loginBox">
			<input autocapitalize="off" autocorrect="off" id="username_box" type="text" placeholder="Username/Email" class="m_textbox login_textbox"/><br>
			<input id="password_box" type="password" placeholder="Password" class="m_textbox login_textbox"/><br>
			<div id="remember"><input type="checkbox" id="remember_box"></input><label for="remember_box" id="remember_text">Remember me?</label></div>
			<input id="login_button" type="button" class="m_button m_orange login_button" value="Log In"/><br>
			<input id="signup_buttonL" type="button" class="m_button m_blue login_button" onclick="location='signup'" value="Sign Up"/><br>
			<br>
			<a id="fp_btn" href="fp">Forgot password?</a>
		</div>

		<div class="left-body">
			<div class="landingBox landingBox-main">
				<!-- HTML DOES NOT RECOGNIZE LINE BREAKS OR MORE THAN ONE SPACE IN YOUR TEXT. USE <br> AND &nbsp; INSTEAD -->
				<div>
					<h1 class="landing-title">Welcome</h1>
					<h2 class="landing-text">MorMap is an all-in-one management and organization utility for FRC teams around the world. The development of MorMap has been led by team 1515 since the summer of 2015. The goal of MorMap is to keep track of all the FRC teams and to provide a unified and easily accessible experience for teams and their members.</h2>
				</div>


				<div>
					<h1 class="landing-title">Map</h1>
					<h2 class="landing-text">Locations of teams is necessary in order to know where your competition stems from. MorMap give the user a world map with the location of all the FRC teams.</h2>
				</div>
				<div>
					<h1 class="landing-title">Team List</h1>
					<h2 class="landing-text">It is always important to have an index of the teams you must compete or work together with. The team's list allows the user to search any team to learn more about it.</h2>
				</div>
				<div>
					<h1 class="landing-title">Profile</h1>
					<h2 class="landing-text">Every team wants to promote themselves to potential donors and sponsors. The profile page lets the user customize their team's profile page to appeal to viewers.</h2>
				</div>
			</div>
		</div>

	<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
	<script>
	$(document).ready(function(){
		// clear cache and reset cookies and localStorage for update if not already done
		var resetCount = 1; // increment this whenever another reset is needed
		if(parseInt(localStorage.resets).toString() != localStorage.resets || localStorage.resets < resetCount) {
			sessionStorage.clear();
			localStorage.clear();
			localStorage.resets = resetCount;
			document.cookie = "connect.sid=; expires=Thu, 01 Jan 1970 00:00:01 GMT;";
			location.reload(true);
		}
      $("#username_box").focus();
      $("#login_button").click(function(){
        var $this = $(this);
        $(this).val("Logging in...");
        $(this).prop("disabled",true);
        var username = $.trim($("#username_box").val());
        var password = $("#password_box").val();
        $.post("/f/login", {"username": username, "password": password, "rememberMe": $('#remember_box').is(':checked')}, function(responseText){
          if(responseText != "inc/username" && responseText != "inc/password" && responseText != "fail"){
            var user = responseText;
            localStorage.username = user.username;
            localStorage.firstname = user.firstname;
            localStorage.lastname = user.lastname;
            localStorage._id = user._id;
            localStorage.phone = user.phone;
            localStorage.email = user.email;
            localStorage.teams = JSON.stringify(user.teams);
            localStorage.profpicpath = user.profpicpath;
            if(user.teams && user.teams.length > 0){
              if(user.current_team){
                localStorage.c_team = user.current_team.id;
                localStorage.c_team_position = user.current_team.position;
				// for morscout
				localStorage.teamNumber = user.current_team.number;
				localStorage.teamName = user.current_team.name;
              }
            }
			if(location.search != "?scout") {
            	location="/";
			}
			else {
				var host = location.host;
				var lastIndex = host.lastIndexOf(".");
				var secondLastIndex = host.slice(0, lastIndex).lastIndexOf(".");
				if(secondLastIndex == -1) {
					secondLastIndex = 0;
					host = "." + host;
				}
				location = "http://scout" + host.slice(secondLastIndex);
			}
          }else if(responseText == "inc/password" || responseText == "inc/username"){
            alert("incorrect username/password");
            $this.val("Log in");
            $this.prop("disabled",false);
          }else{
            alert(responseText);
            $this.val("Log in");
            $this.prop("disabled",false);
          }
        });
      });
      $(document).keypress(function(e) {
        if(e.which == 13) {
          if($("#password_box").is(":focus")){
            $("#login_button").trigger("click");
          }else if ($("#username_box").is(":focus")) {
            $("#password_box").focus();
          }
        }
      });
  });
	</script>

	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-67504156-1', 'auto');
	ga('send', 'pageview');
	</script>

	</body>

</html>
