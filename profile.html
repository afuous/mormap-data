<!DOCTYPE html>
<html lang="en">

  <head>
  	<meta charset="utf-8" />
  	<meta http-equiv="X-UA-Compatible" content="IE=edge">
  	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>MorMap - Team Profile</title>
  	<link href='http://fonts.googleapis.com/css?family=Open+Sans:700,300,400' rel='stylesheet' type='text/css'>
  	<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
  	<link href='http://fonts.googleapis.com/css?family=Exo+2:400,300,200' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Titillium+Web' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
    <link href="../jbox/jBox.css" rel="stylesheet">
    <link href="../jbox/themes/TooltipDark.css" rel="stylesheet">
    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <link rel="stylesheet" href="profile.css" type="text/css"/>


  </head>
  <body>

    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="index.html">MorMap</a>
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#MorMapNav" id="toggle-button">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div class="collapse navbar-collapse" id="MorMapNav">
                <ul class="nav navbar-nav">
                    <li><a href="teams.html" title="List of all teams">Team List</a></li>
                    <li><a href="settings.html" title="Configure the settings">Settings</a></li>
                </ul>
                <div class='user-search nav navbar-nav'>
                  <input type="text" placeholder="Search Users" class="nav-tbox"></input>
                  <div class="search-drop">
                    <ul class="search-drop-items">
                    </ul>
                  </div>
                </div>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="help.html" title="Need help?">Help</a></li>
                    <li><a href="feedback.html" title="Give team 1515 your feedback!">Feedback</a></li>
                    <li style="background-color:#EE7600;"><a href="profile.html"  title="User Profile">Profile</a></li>
            		    <li id="UserDropdown" class="dropdown">
                      <a id="logoutButton" href="login.html">Log in</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>


    <div class="left-bar">
      <h1 id="team-name">Profile</h1>
      <img class="team-pic" src="http://www.allegraabbotsford.com/wp-content/uploads/2015/06/generic-profile.png"/>

      <h3>[Team Name]</h3>
      <h3>[Team Number]</h3>

      <input type="button" class="button left-button" id="left-bar-button" value="Edit Team Profile"></input>
      <input type="button" class="button left-button" id="left-bar-button" value="Change Password"></input>

    </div>

    <div class="row">

      <div class="col-md-6">
        <div class="subdivisions">
          <h1 class="scout-div-title profile-div-title">Subdivisions</h1>
          <h3 class="subdivision-programming">Programming</h3>
            <h5 class="link">Link</h5>
          <h3 class="subdivision-build">Build...Needs mental help</h3>
            <h5 class="link">Link</h5>
          <h3 class="subdivision-business">Business...Doesn't do any work</h3>
            <h5 class="link">Link</h5>
          <ul id="task-list">
            <!-- <li class="profile-orange profile-li-font">From Match 1 to 10, Red Alliance, Team 2</li> -->
          </ul>
        </div>
      </div>

      <div class="col-md-6">
        <div class="stats">
          <h1 class="scout-div-title profile-div-title">Statistics</h1>
          <ul>
            <h3 class="orange profile-li-font">Competitions Participated In: <span id="matches-scouted-label"></span></h3>
              <li class="list"><h5>list</h5></li>
            <h3 class="orange profile-li-font">Awards: <span id="pits-scouted-label"></span></h3>
              <li class="list"><h5>list</h5></li>
            </ul>
          </div>
        </div>

    </div>

    <div class="team-information">
      <h1 class="scout-div-title profile-div-title" id="task-assign-heading">Team Information</h1>
      <div class="assign-task-div">
        <h3 class="page-title task-heading task-inline" id="first-word">Contacts</h3>
          <li class="email">[Email]</li>
          <li class="phone-number">[Phone-Number]</li>
          <li class="website-link">[Website-Link]</li>
        <h3 class="page-title task-heading task-inline" id="task-second-word">Alliance</h3>
        <select id="alliance-drop" class="task-inline creator-dropdown task-dropdown">
          <option value="red">Red Alliance</option>
          <option value="blue">Blue Alliance</option>
        </select>

    <script src="js/main.js" type="text/javascript"></script>

    <script>
    var userID = qs("id");
    if (!userID){
        userID = localStorage.userID;
    }
    if (localStorage.admin != "true"){//server is still protected
        $(".assign-task").hide();
    }
    $.post("/getUserStats", {userID: userID}, function(response){
        var stats = JSON.parse(response);
        id="matches-scouted-label"
        $("#teams-scouted-label").html(stats.teamsScouted);
        $("#matches-scouted-label").html(stats.matchesScouted);
        $("#pits-scouted-label").html(stats.pitsScouted);
    });
    $("#team-label").html("Team " + localStorage.teamNumber);
    $("#profile-name").html(localStorage.firstName + " " + localStorage.lastName);
    loadTasks();
    $("#assign-button").on("click", function(){
        $.post("/assignTask", {
            startMatch: $("#start-match-box").val(),
            endMatch: $("#end-match-box").val(),
            alliance: $("#alliance-drop").val(),
            teamSection: $("#sect-drop").val(),
            scoutID: userID
        }, function(response){
            alert(response);
            loadTasks();
        });
    });
    function loadTasks(){
        var taskList = $("#task-list");
        taskList.empty();
        $.post("/showTasks", {scoutID: userID}, function(response){
            var tasks = JSON.parse(response);
            for (var i = 0; i < tasks.assignments.length; i++){
                var task = tasks.assignments[i];
                var li = $(document.createElement("li"));
                li.addClass("profile-orange profile-li-font");
                li.html("From match " + task.startMatch + " to " + task.endMatch + ", " + task.alliance.substring(0, 1).toUpperCase() + task.alliance.substring(1) + " Alliance, Team " + task.teamSection)
                taskList.append(li);
            }
            $("#complete-matches-label").html(tasks.matchesDone.join(", "));
            $("#not-complete-matches-label").html(tasks.matchesNotDone.join(", "));
            $("#completion-label").html(tasks.matchesDone.length + "/" + (tasks.matchesDone.length + tasks.matchesNotDone.length));
        });
    }
    </script>





  </body>
</html>
